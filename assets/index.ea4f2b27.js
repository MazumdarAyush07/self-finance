var O=Object.defineProperty,R=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var v=(t,e,r)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,m=(t,e)=>{for(var r in e||(e={}))P.call(e,r)&&v(t,r,e[r]);if(h)for(var r of h(e))k.call(e,r)&&v(t,r,e[r]);return t},p=(t,e)=>R(t,D(e));import{i as B,g as G,B as U,G as _,s as M,a as K,U as T,V as f,K as N,w as b,T as A,r as l,u as W,R as n,D as z,I as $,b as j}from"./vendor.4eb58551.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}};q();var H=(t,e)=>{switch(e.type){case"GET_TRANSACTION":return console.log(e.payload),p(m({},t),{transactions:e.payload});case"DELETE_TRANSACTION":return p(m({},t),{transactions:t.transactions.filter(r=>r.id!==e.payload)});case"ADD_TRANSACTION":return p(m({},t),{transactions:[e.payload,...t.transactions]});default:return t}};const C={apiKey:"AIzaSyBlUg_f80W7kxCU54WE2It92TJrzPFs5Y4",authDomain:"expense-tracker-2fdbd.firebaseapp.com",projectId:"expense-tracker-2fdbd",storageBucket:"expense-tracker-2fdbd.appspot.com",messagingSenderId:"659559242457",appId:"1:659559242457:web:a25afeb2f0c097b8d57cc8",measurementId:"G-NLPMPZ5S59"};console.log(C);const I=B(C),y=G(I),E=U(I),V=new _,J=async()=>{try{const e=(await K(y,V)).user,r=T(f(E,"users"),N("uid","==",e.uid));(await b(r)).docs.length===0&&await A(f(E,"users"),{uid:e.uid,name:e.displayName,authProvider:"google",email:e.email})}catch(t){console.error(t),alert(t.message)}},Y=()=>{M(y)},w={transactions:[]},d=l.exports.createContext(w),Z=({children:t})=>{const[e,r]=l.exports.useReducer(H,w),[o,a,s]=W(y),c=async()=>{if(!o)return;let i=await b(T(f(E,"transactions"),N("uid","==",o.uid)));i=i.docs.map(u=>p(m({},u.data()),{id:u.id})),r({type:"GET_TRANSACTION",payload:i})};async function g(i){const u=await z(E,"transactions",i);$(u),r({type:"DELETE_TRANSACTION",payload:i})}async function F(i){const u={uid:o.uid,amount:i.amount,tag:i.tag};try{const x=await A(f(E,"transactions"),u);u.id=x.id,r({type:"ADD_TRANSACTION",payload:u})}catch(x){console.error(x)}}const L=()=>{J()};return l.exports.useEffect(()=>{c()},[o]),n.createElement(d.Provider,{value:{transactions:e.transactions,deleteTransaction:g,addTransaction:F,user:o,loading:a,error:s,logInUser:L}},t)},Q=()=>{const{user:t,loading:e,error:r,logInUser:o}=l.exports.useContext(d);return l.exports.useEffect(()=>{},[e,t]),n.createElement("div",{className:"header"},n.createElement("h2",null,"Expense Tracker"),!e&&(t?n.createElement("button",{className:"header-btn log-out",onClick:Y},"Logout"):n.createElement("button",{className:"header-btn",onClick:o},"Login with Google")))};const X=()=>n.createElement("div",{className:"lds-ellipsis"},n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null));function ee(t){if(!t)return;let e=t==null?void 0:t.toFixed(2).split(".");return"\u20B9 "+(e[0].split("")[0]==="-"?"-":"")+e[0].split("").reverse().reduce(function(r,o,a,s){return o==="-"?r:o+(a&&!(a%3)?",":"")+r},"")+"."+e[1]}const te=()=>{const{transactions:t,user:e}=l.exports.useContext(d),r=t==null?void 0:t.map(a=>a.amount),o=r==null?void 0:r.reduce((a,s)=>a+=s,0);return n.createElement(n.Fragment,null,n.createElement("h4",null,e.displayName,"'s Balance"),n.createElement("h1",null,ee(o)))};function S(t){if(!t)return;let e=t.toFixed(2).split(".");return"\u20B9 "+e[0].split("").reverse().reduce(function(r,o,a,s){return o==="-"?r:o+(a&&!(a%3)?",":"")+r},"")+"."+e[1]}const ne=()=>{const{transactions:t}=l.exports.useContext(d),e=t==null?void 0:t.map(a=>a.amount),r=e==null?void 0:e.filter(a=>a>0).reduce((a,s)=>a+=s,0),o=(e==null?void 0:e.filter(a=>a<0).reduce((a,s)=>a+=s,0))*-1;return n.createElement("div",{className:"inc-exp-container"},n.createElement("div",null,n.createElement("h4",null,"Income"),n.createElement("p",{className:"money plus"},S(r))),n.createElement("div",null,n.createElement("h4",null,"Expense"),n.createElement("p",{className:"money minus"},S(o))))};function re(t){let e=t.toFixed(2).split(".");return"\u20B9 "+e[0].split("").reverse().reduce(function(r,o,a,s){return o==="-"?r:o+(a&&!(a%3)?",":"")+r},"")+"."+e[1]}const ae=({transaction:t})=>{const{deleteTransaction:e}=l.exports.useContext(d),r=t.amount<0?"-":"+";return n.createElement("li",{className:t.amount<0?"minus":"plus"},t.tag," ",n.createElement("span",null,r,re(t.amount)),n.createElement("button",{onClick:()=>e(t.id),className:"delete-btn"},"x"))},oe=()=>{const{transactions:t}=l.exports.useContext(d);return l.exports.useEffect(()=>{console.log("Transactions Updated!")},[t]),n.createElement(n.Fragment,null,n.createElement("h3",null,"History"),n.createElement("ul",{className:"list"},t==null?void 0:t.map(e=>n.createElement(ae,{key:e.id,transaction:e}))))},se=()=>{const[t,e]=l.exports.useState(""),[r,o]=l.exports.useState(0),{addTransaction:a}=l.exports.useContext(d),s=c=>{c.preventDefault();const g={id:Math.floor(Math.random()*1e8),tag:t,amount:+r};a(g)};return n.createElement(n.Fragment,null,n.createElement("h3",null,"Add new transaction"),n.createElement("form",{onSubmit:s},n.createElement("div",{className:"form-control"},n.createElement("label",{htmlFor:"text"},"Text"),n.createElement("input",{type:"text",value:t,onChange:c=>e(c.target.value),placeholder:"Enter text..."})),n.createElement("div",{className:"form-control"},n.createElement("label",{htmlFor:"amount"},"Amount ",n.createElement("br",null),"(negative - expense, positive - income)"),n.createElement("input",{type:"number",value:r,onChange:c=>o(c.target.value),placeholder:"Enter amount..."})),n.createElement("button",{className:"btn"},"Add transaction")))},le=()=>{const{user:t,loading:e,error:r}=l.exports.useContext(d);return l.exports.useEffect(()=>{},[t,e]),e?n.createElement(X,null):t?n.createElement("div",{className:"container"},n.createElement(te,null),n.createElement(ne,null),n.createElement(se,null),n.createElement(oe,null)):n.createElement("div",{style:{textAlign:"center"}},"Login to manage transactions!")};function ce(){return n.createElement(Z,null,n.createElement(Q,null),n.createElement(le,null))}j.render(n.createElement(ce,null),document.getElementById("root"));
